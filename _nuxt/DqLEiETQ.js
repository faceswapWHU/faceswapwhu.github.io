import{u as U}from"./OlYAuNpc.js";import{E as l}from"./jxwzPBVp.js";import{g as V,m as n,o as E,c as N,a as s,y as S,q as g,v as m,i as f,s as c,d as A,x as B,_ as P}from"./Dnx_HCZ7.js";import{u as T}from"./Cz8v4uHA.js";import"./b7z2R-NT.js";const _={class:"bgc"},q={class:"sbgc"},z={class:"loginBox"},M={class:"item"},R={class:"item"},Z={class:"item"},O=V({__name:"register",setup(j){T({title:"Register"});const{apiBaseUrl:y}=U(),r=n(""),a=n(""),p=n("");async function b(t){if(C(),!i.value&&(k(),!v.value)){if(console.log(JSON.stringify({username:r.value,password:a.value})),p.value!=a.value){l({showClose:!0,message:"请输入相同的密码",type:"warning"});return}try{(await fetch(y.value+"auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r.value,password:a.value})})).ok?(l({showClose:!0,message:"注册成功！",type:"success"}),B("/login")):l({showClose:!0,message:"该用户已存在！",type:"warning"})}catch(e){console.error("Error:",e)}}}const o=n(""),i=n(!1),u=n(""),v=n(!1),h=t=>t.length>=2&&t.length<=30,x=t=>t.length>=6&&t.length<=20,w=t=>/^[A-Za-z0-9]+$/.test(t),C=()=>{if(h(r.value))o.value="",i.value=!1;else{o.value="用户名必须大于等于4个字符且小于等于10个字符",i.value=!0,l({showClose:!0,message:o.value,type:"warning"});return}if(w(r.value))o.value="",i.value=!1;else{o.value="用户名只能包含(a-z,A-Z,0-9)",i.value=!0,l({showClose:!0,message:o.value,type:"warning"});return}},k=()=>{if(x(a.value))u.value="",v.value=!1;else{u.value="密码必须大于等于6个字符且小于等于10个字符",v.value=!0,l({showClose:!0,message:u.value,type:"warning"});return}if(w(a.value))u.value="",v.value=!1;else{u.value="密码只能包含(a-z,A-Z,0-9)",v.value=!0,l({showClose:!0,message:u.value,type:"warning"});return}};return(t,e)=>(E(),N("div",_,[s("div",q,[s("div",z,[e[8]||(e[8]=s("div",{class:"title"},"Register",-1)),s("form",{onSubmit:S(b,["prevent"])},[s("div",M,[g(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=d=>c(r)?r.value=d:null),pattern:"[a-zA-Z0-9]+",required:""},null,512),[[m,f(r)]]),e[3]||(e[3]=s("label",{for:""},"Username",-1))]),e[6]||(e[6]=s("div",{style:{height:"25px"}},null,-1)),s("div",R,[g(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=d=>c(a)?a.value=d:null),required:""},null,512),[[m,f(a)]]),e[4]||(e[4]=s("label",{for:""},"Password",-1))]),s("div",Z,[g(s("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=d=>c(p)?p.value=d:null),required:""},null,512),[[m,f(p)]]),e[5]||(e[5]=s("label",{for:""},"Confirm",-1))]),e[7]||(e[7]=s("div",{style:{display:"flex","justify-content":"center"}},[s("button",{class:"btn",type:"submit"},[A("Sign Up "),s("span"),s("span"),s("span")])],-1))],32)]),e[9]||(e[9]=s("div",{class:"links"},[s("div",null,[s("a",{href:"/",class:"link"},"home")]),s("div",null,[s("a",{href:"/login",class:"link"},"sign in")])],-1))])]))}}),G=P(O,[["__scopeId","data-v-4d4920e4"]]);export{G as default};
