import{u as z}from"./DkJ4MIMT.js";import{E as a}from"./Cp-MeL-x.js";import{g as E,m as n,o as V,c as U,a as s,L as j,q as f,v as g,i as c,s as v,K as A}from"./DjFBsM8g.js";import{u as N}from"./B5bLhPBL.js";import"./B6_1CZ4M.js";const S={class:"min-h-screen flex items-center justify-center bg-gray-50"},q={class:"max-w-md w-full space-y-8 border border-gray-300 p-6"},B={class:"rounded-md shadow-sm -space-y-px"},M={class:"rounded-md shadow-sm -space-y-px"},D=E({__name:"register",setup(P){N({title:"Register"});const{apiBaseUrl:w}=z(),t=n(""),o=n(""),m=n("");async function b(r){if(C(),!i.value&&(k(),!d.value)){if(console.log(JSON.stringify({username:t.value,password:o.value})),m.value!=o.value){a({showClose:!0,message:"请输入相同的密码",type:"warning"});return}try{(await fetch(w.value+"auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.value,password:o.value})})).ok?(a({showClose:!0,message:"注册成功！",type:"success"}),A("/login")):a({showClose:!0,message:"该用户已存在！",type:"warning"})}catch(e){console.error("Error:",e)}}}const l=n(""),i=n(!1),u=n(""),d=n(!1),x=r=>r.length>=2&&r.length<=30,h=r=>r.length>=6&&r.length<=20,y=r=>/^[A-Za-z0-9]+$/.test(r),C=()=>{if(x(t.value))l.value="",i.value=!1;else{l.value="用户名必须大于等于4个字符且小于等于10个字符",i.value=!0,a({showClose:!0,message:l.value,type:"warning"});return}if(y(t.value))l.value="",i.value=!1;else{l.value="用户名只能包含(a-z,A-Z,0-9)",i.value=!0,a({showClose:!0,message:l.value,type:"warning"});return}},k=()=>{if(h(o.value))u.value="",d.value=!1;else{u.value="密码必须大于等于6个字符且小于等于10个字符",d.value=!0,a({showClose:!0,message:u.value,type:"warning"});return}if(y(o.value))u.value="",d.value=!1;else{u.value="密码只能包含(a-z,A-Z,0-9)",d.value=!0,a({showClose:!0,message:u.value,type:"warning"});return}};return(r,e)=>(V(),U("div",S,[s("div",q,[e[7]||(e[7]=s("div",{class:"flex items-center justify-between"},[s("div",{class:"text-sm"},[s("a",{href:"/login",class:"font-medium text-indigo-600 hover:text-indigo-500"}," 返回登录 ")])],-1)),e[8]||(e[8]=s("div",null,null,-1)),e[9]||(e[9]=s("div",null,[s("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," 注册 ")],-1)),s("form",{class:"mt-8 space-y-6",onSubmit:j(b,["prevent"])},[s("div",B,[s("div",null,[e[3]||(e[3]=s("label",{for:"username",class:"sr-only"},"用户名",-1)),f(s("input",{id:"username",name:"username",type:"text","onUpdate:modelValue":e[0]||(e[0]=p=>v(t)?t.value=p:null),autocomplete:"username",required:"",pattern:"[a-zA-Z0-9]+",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"用户名"},null,512),[[g,c(t)]])])]),s("div",M,[s("div",null,[e[4]||(e[4]=s("label",{for:"password",class:"sr-only"},"密码",-1)),f(s("input",{id:"password",name:"password",type:"password","onUpdate:modelValue":e[1]||(e[1]=p=>v(o)?o.value=p:null),autocomplete:"current-password",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"密码"},null,512),[[g,c(o)]])]),s("div",null,[e[5]||(e[5]=s("label",{for:"password",class:"sr-only"},"重复密码",-1)),f(s("input",{id:"repassword",name:"repassword",type:"password","onUpdate:modelValue":e[2]||(e[2]=p=>v(m)?m.value=p:null),autocomplete:"current-password",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"重复密码"},null,512),[[g,c(m)]])])]),e[6]||(e[6]=s("div",{class:"mt-6 flex justify-between"},[s("button",{type:"submit",class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," 注册 ")],-1))],32)])]))}});export{D as default};
