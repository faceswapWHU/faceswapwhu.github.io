import{_ as g}from"./CBFGjpb4.js";import{u as x}from"./CyEfYi4p.js";import{E as a}from"./CCiOLUzT.js";import{g as y,m as i,o as b,c as v,a as o,L as w,q as l,v as d,b as h,w as j,d as k,K as S}from"./DIeUT0Iv.js";import{u as _}from"./myxEe2Y1.js";import{u as T}from"./Du8ibXpn.js";import"./C4chx_jK.js";import"./O4DT29vE.js";const V={class:"min-h-screen flex items-center justify-center bg-gray-50"},B={class:"max-w-md w-full space-y-8 border border-gray-300 p-4"},E={class:"rounded-md shadow-sm -space-y-px"},L={class:"mt-6 flex justify-between"},D=y({__name:"login",setup(M){T({title:"Login"});const t=i(""),r=i(""),{apiBaseUrl:u}=x(),m=_(),f=async s=>{m.login(s)},p=async()=>{try{const s=await fetch(u.value+"auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.value,password:r.value})}),e=await s.json();if(s.ok)a({duration:1e3,message:"登录成功！",type:"success"}),f(e.access_token),S("/");else throw new Error(e.msg)}catch{a.error("用户不存在或者密码错误！")}};return(s,e)=>{const c=g;return b(),v("div",V,[o("div",B,[e[7]||(e[7]=o("div",{class:"flex items-center justify-between"},[o("div",{class:"text-sm"},[o("a",{href:"/",class:"font-medium text-indigo-600 hover:text-indigo-500"}," 返回主页 ")])],-1)),e[8]||(e[8]=o("div",null,[o("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," 登录 ")],-1)),o("form",{class:"mt-8 space-y-6",onSubmit:w(p,["prevent"])},[o("div",E,[o("div",null,[e[2]||(e[2]=o("label",{for:"username",class:"sr-only"},"用户名",-1)),l(o("input",{id:"username",name:"username",type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>t.value=n),autocomplete:"username",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"用户名"},null,512),[[d,t.value]])]),o("div",null,[e[3]||(e[3]=o("label",{for:"password",class:"sr-only"},"密码",-1)),l(o("input",{id:"password",name:"password",type:"password","onUpdate:modelValue":e[1]||(e[1]=n=>r.value=n),autocomplete:"current-password",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"密码"},null,512),[[d,r.value]])])]),e[6]||(e[6]=o("div",{class:"flex items-center justify-between"},[o("div",{class:"text-sm"},[o("a",{href:"/forgetPassword",class:"font-medium text-indigo-600 hover:text-indigo-500"}," 忘记密码？ ")])],-1)),o("div",L,[e[5]||(e[5]=o("button",{type:"submit",class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," 登录 ",-1)),h(c,{href:"/register",size:"md",class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-gray-600 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},{default:j(()=>e[4]||(e[4]=[k(" 注册")])),_:1})])],32)])])}}});export{D as default};
