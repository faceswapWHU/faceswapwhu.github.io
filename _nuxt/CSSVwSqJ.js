import{u as f}from"./uFyD1esN.js";import{E as r}from"./D623UXSr.js";import{g,m as i,o as c,c as y,a as s,y as w,q as l,v as d,d as b,x,_}from"./DpLp4s5t.js";import{u as k}from"./XOxm6fyw.js";import{u as S}from"./tuvT1N7b.js";import"./r2wCzOjF.js";const B={class:"bgc"},E={class:"sbgc"},T={class:"loginBox"},h={class:"item"},M={class:"item"},P=g({__name:"login",setup(U){S({title:"Login"});const t=i(""),n=i(""),{apiBaseUrl:u}=f(),p=k(),m=async o=>{p.login(o)},v=async()=>{try{const o=await fetch(u.value+"api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usernameOrEmail:t.value,password:n.value})}),e=await o.json();if(console.log(e),o.ok)r({duration:1e3,message:"登录成功！",type:"success"}),m(e.access_token),x("/");else throw new Error(e.msg)}catch(o){console.error("Login error:",o),r.error("用户不存在或者密码错误！")}};return(o,e)=>(c(),y("div",B,[s("div",E,[s("div",T,[e[6]||(e[6]=s("div",{class:"title"},"Login",-1)),s("form",{onSubmit:w(v,["prevent"])},[s("div",h,[l(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>t.value=a),required:""},null,512),[[d,t.value]]),e[2]||(e[2]=s("label",{for:""},"Username",-1))]),s("div",M,[l(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=a=>n.value=a),required:""},null,512),[[d,n.value]]),e[3]||(e[3]=s("label",{for:""},"Password",-1))]),e[4]||(e[4]=s("div",null,null,-1)),e[5]||(e[5]=s("div",{style:{display:"flex","justify-content":"center"}},[s("button",{class:"btn",type:"submit"},[b("Sign In "),s("span"),s("span"),s("span")])],-1))],32)]),e[7]||(e[7]=s("div",{class:"links"},[s("div",null,[s("a",{href:"/",class:"link"},"home")]),s("div",null,[s("a",{href:"/forgetPassword",class:"link"},"forgotPassword")]),s("div",null,[s("a",{href:"/register",class:"link"},"sign up")])],-1))])]))}}),A=_(P,[["__scopeId","data-v-976a05d4"]]);export{A as default};
