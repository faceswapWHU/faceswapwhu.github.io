import{u as k}from"./DrlRsimv.js";import{E as o}from"./DOAoupFn.js";import{g as E,m as a,o as N,c as S,a as s,y as q,q as f,v as g,i as w,s as y,d as A,x as B,_ as P}from"./C6Q-3SYB.js";import{u as T}from"./CwFJAg3J.js";import"./CMhLHvtg.js";const z={class:"bgc"},M={class:"sbgc"},R={class:"loginBox"},Z={class:"item"},O={class:"item"},_={class:"item"},j={class:"item"},J=E({__name:"register",setup(D){T({title:"Register"});const{apiBaseUrl:b}=k(),r=a(""),p=a(""),l=a(""),m=a("");async function x(t){if(U(),!d.value&&(V(),!v.value)){if(console.log(JSON.stringify({username:r.value,password:l.value})),m.value!=l.value){o({showClose:!0,message:"请输入相同的密码",type:"warning"});return}try{(await fetch(b.value+"api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r.value,email:p.value,password:l.value})})).ok?(o({showClose:!0,message:"注册成功！",type:"success"}),B("/login")):o({showClose:!0,message:"该用户已存在！",type:"warning"})}catch(e){console.error("Error:",e)}}}const i=a(""),d=a(!1),u=a(""),v=a(!1),C=t=>t.length>=2&&t.length<=30,h=t=>t.length>=6&&t.length<=20,c=t=>/^[A-Za-z0-9]+$/.test(t),U=()=>{if(C(r.value))i.value="",d.value=!1;else{i.value="用户名必须大于等于4个字符且小于等于10个字符",d.value=!0,o({showClose:!0,message:i.value,type:"warning"});return}if(c(r.value))i.value="",d.value=!1;else{i.value="用户名只能包含(a-z,A-Z,0-9)",d.value=!0,o({showClose:!0,message:i.value,type:"warning"});return}},V=()=>{if(h(l.value))u.value="",v.value=!1;else{u.value="密码必须大于等于6个字符且小于等于10个字符",v.value=!0,o({showClose:!0,message:u.value,type:"warning"});return}if(c(l.value))u.value="",v.value=!1;else{u.value="密码只能包含(a-z,A-Z,0-9)",v.value=!0,o({showClose:!0,message:u.value,type:"warning"});return}};return(t,e)=>(N(),S("div",z,[s("div",M,[s("div",R,[e[10]||(e[10]=s("div",{class:"title"},"Register",-1)),s("form",{onSubmit:q(x,["prevent"])},[s("div",Z,[f(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>y(r)?r.value=n:null),pattern:"[a-zA-Z0-9]+",required:""},null,512),[[g,w(r)]]),e[4]||(e[4]=s("label",{for:""},"Username",-1))]),s("div",O,[f(s("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=n=>y(p)?p.value=n:null),required:""},null,512),[[g,w(p)]]),e[5]||(e[5]=s("label",{for:""},"Email",-1))]),e[8]||(e[8]=s("div",{style:{height:"35px"}},null,-1)),s("div",_,[f(s("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=n=>y(l)?l.value=n:null),required:""},null,512),[[g,w(l)]]),e[6]||(e[6]=s("label",{for:""},"Password",-1))]),s("div",j,[f(s("input",{type:"password","onUpdate:modelValue":e[3]||(e[3]=n=>y(m)?m.value=n:null),required:""},null,512),[[g,w(m)]]),e[7]||(e[7]=s("label",{for:""},"Confirm",-1))]),e[9]||(e[9]=s("div",{style:{display:"flex","justify-content":"center"}},[s("button",{class:"btn",type:"submit"},[A("Sign Up "),s("span"),s("span"),s("span")])],-1))],32)]),e[11]||(e[11]=s("div",{class:"links"},[s("div",null,[s("a",{href:"/",class:"link"},"home")]),s("div",null,[s("a",{href:"/login",class:"link"},"sign in")])],-1))])]))}}),K=P(J,[["__scopeId","data-v-f6707f33"]]);export{K as default};
