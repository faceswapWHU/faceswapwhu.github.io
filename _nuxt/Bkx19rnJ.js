import{u as c}from"./DrlRsimv.js";import{E as a}from"./DOAoupFn.js";import{g as f,m as r,o as g,c as y,a as s,y as w,q as l,v as d,d as b,x,_}from"./C6Q-3SYB.js";import{u as k}from"./Bo41m7mU.js";import{u as S}from"./CwFJAg3J.js";import"./CMhLHvtg.js";const B={class:"bgc"},T={class:"sbgc"},E={class:"loginBox"},M={class:"item"},V={class:"item"},h=f({__name:"login",setup(j){S({title:"Login"});const t=r(""),n=r(""),{apiBaseUrl:u}=c(),p=k(),m=async o=>{p.login(o)},v=async()=>{try{const o=await fetch(u.value+"api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.value,password:n.value})}),e=await o.json();if(console.log(e),o.ok)a({duration:1e3,message:"登录成功！",type:"success"}),m(e.access_token),x("/");else throw new Error(e.msg)}catch(o){console.error("Login error:",o),a.error("用户不存在或者密码错误！")}};return(o,e)=>(g(),y("div",B,[s("div",T,[s("div",E,[e[6]||(e[6]=s("div",{class:"title"},"Login",-1)),s("form",{onSubmit:w(v,["prevent"])},[s("div",M,[l(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>t.value=i),required:""},null,512),[[d,t.value]]),e[2]||(e[2]=s("label",{for:""},"用户名",-1))]),s("div",V,[l(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=i=>n.value=i),required:""},null,512),[[d,n.value]]),e[3]||(e[3]=s("label",{for:""},"密码",-1))]),e[4]||(e[4]=s("div",null,null,-1)),e[5]||(e[5]=s("div",{style:{display:"flex","justify-content":"center"}},[s("button",{class:"btn",type:"submit"},[b("登陆 "),s("span"),s("span"),s("span")])],-1))],32)]),e[7]||(e[7]=s("div",{class:"links"},[s("div",null,[s("a",{href:"/",class:"link"},"返回主页")]),s("div",null,[s("a",{href:"/forgetPassword",class:"link"},"忘记密码？")]),s("div",null,[s("a",{href:"/register",class:"link"},"注册")])],-1))])]))}}),O=_(h,[["__scopeId","data-v-6355957d"]]);export{O as default};
