import{u as V}from"./DReBewYT.js";import{E as r}from"./Bu65QAXf.js";import{g as E,m as o,o as N,c as U,a as s,y as A,q as f,v as g,i as m,s as c,d as B,x as S,_ as T}from"./SB7nfnlm.js";import{u as _}from"./Cu3t_kiS.js";import"./0a9C30fr.js";const q={class:"bgc"},z={class:"sbgc"},M={class:"loginBox"},P={class:"item"},R={class:"item"},Z={class:"item"},O=E({__name:"register",setup(j){_({title:"Register"});const{apiBaseUrl:y}=V(),l=o(""),a=o(""),p=o("");async function b(t){if(C(),!i.value&&(k(),!v.value)){if(console.log(JSON.stringify({username:l.value,password:a.value})),p.value!=a.value){r({showClose:!0,message:"请输入相同的密码",type:"warning"});return}try{(await fetch(y.value+"auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:l.value,password:a.value})})).ok?(r({showClose:!0,message:"注册成功！",type:"success"}),S("/login")):r({showClose:!0,message:"该用户已存在！",type:"warning"})}catch(e){console.error("Error:",e)}}}const n=o(""),i=o(!1),u=o(""),v=o(!1),x=t=>t.length>=2&&t.length<=30,h=t=>t.length>=6&&t.length<=20,w=t=>/^[A-Za-z0-9]+$/.test(t),C=()=>{if(x(l.value))n.value="",i.value=!1;else{n.value="用户名必须大于等于4个字符且小于等于10个字符",i.value=!0,r({showClose:!0,message:n.value,type:"warning"});return}if(w(l.value))n.value="",i.value=!1;else{n.value="用户名只能包含(a-z,A-Z,0-9)",i.value=!0,r({showClose:!0,message:n.value,type:"warning"});return}},k=()=>{if(h(a.value))u.value="",v.value=!1;else{u.value="密码必须大于等于6个字符且小于等于10个字符",v.value=!0,r({showClose:!0,message:u.value,type:"warning"});return}if(w(a.value))u.value="",v.value=!1;else{u.value="密码只能包含(a-z,A-Z,0-9)",v.value=!0,r({showClose:!0,message:u.value,type:"warning"});return}};return(t,e)=>(N(),U("div",q,[s("div",z,[s("div",M,[e[8]||(e[8]=s("div",{class:"title"},"Register",-1)),s("form",{onSubmit:A(b,["prevent"])},[s("div",P,[f(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=d=>c(l)?l.value=d:null),pattern:"[a-zA-Z0-9]+",required:""},null,512),[[g,m(l)]]),e[3]||(e[3]=s("label",{for:""},"用户名",-1))]),e[6]||(e[6]=s("div",{style:{height:"25px"}},null,-1)),s("div",R,[f(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=d=>c(a)?a.value=d:null),required:""},null,512),[[g,m(a)]]),e[4]||(e[4]=s("label",{for:""},"密码",-1))]),s("div",Z,[f(s("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=d=>c(p)?p.value=d:null),required:""},null,512),[[g,m(p)]]),e[5]||(e[5]=s("label",{for:""},"确认密码",-1))]),e[7]||(e[7]=s("div",{style:{display:"flex","justify-content":"center"}},[s("button",{class:"btn",type:"submit"},[B("注册 "),s("span"),s("span"),s("span")])],-1))],32)]),e[9]||(e[9]=s("div",{class:"links"},[s("div",null,[s("a",{href:"/",class:"link"},"返回主页")]),s("div",null,[s("a",{href:"/login",class:"link"},"登陆")])],-1))])]))}}),G=T(O,[["__scopeId","data-v-fa265134"]]);export{G as default};
